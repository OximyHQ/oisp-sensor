---
title: Linux Installation
description: Install OISP Sensor on Linux using packages, universal installer, or binary
---

import { Tabs, TabItem } from '@astrojs/starlight/components';

# Linux Installation

Install OISP Sensor on any Linux distribution with native packages, universal installer, or standalone binary.

## Quick Install (Recommended)

The fastest way to install OISP Sensor on Linux:

```bash
curl -fsSL https://sensor.oisp.dev/install.sh | sudo sh
```

This universal installer will:
1. Auto-detect your Linux distribution
2. Check system requirements (kernel, BTF, OpenSSL)
3. Install via native package (.deb or .rpm)
4. Configure systemd service
5. Set required capabilities

---

## Installation Methods

### Method 1: Package Manager

Install using your distribution's native package manager for automatic updates and easy management.

<Tabs>
  <TabItem label="Ubuntu / Debian">
    ```bash
    # Download .deb package
    wget https://github.com/oximyHQ/oisp-sensor/releases/latest/download/oisp-sensor_0.2.0_amd64.deb

    # Install
    sudo dpkg -i oisp-sensor_0.2.0_amd64.deb

    # Fix dependencies if needed
    sudo apt-get install -f
    ```

    **What gets installed:**
    - Binary: `/usr/bin/oisp-sensor`
    - Config: `/etc/oisp/config.toml`
    - Service: `/lib/systemd/system/oisp-sensor.service`
    - Logs: `/var/log/oisp/`
    - User: `oisp` (system user created)
  </TabItem>

  <TabItem label="RHEL / Rocky / Alma / Fedora">
    ```bash
    # Download .rpm package
    wget https://github.com/oximyHQ/oisp-sensor/releases/latest/download/oisp-sensor-0.2.0-1.x86_64.rpm

    # Install (Fedora / Rocky / Alma)
    sudo dnf install ./oisp-sensor-0.2.0-1.x86_64.rpm

    # Or RHEL 8
    sudo yum install ./oisp-sensor-0.2.0-1.x86_64.rpm
    ```

    **What gets installed:**
    - Binary: `/usr/bin/oisp-sensor`
    - Config: `/etc/oisp/config.toml`
    - Service: `/usr/lib/systemd/system/oisp-sensor.service`
    - Logs: `/var/log/oisp/`
    - User: `oisp` (system user created)
  </TabItem>
</Tabs>

**Advantages:**
- Native package integration
- Automatic updates via package manager
- Systemd service pre-configured
- Proper file permissions and ownership
- Easy uninstall

---

### Method 2: Universal Installer

Auto-detects your distribution and installs the appropriate package:

```bash
# One-line install
curl -fsSL https://sensor.oisp.dev/install.sh | sudo sh

# With custom install directory
INSTALL_DIR=/opt/oisp/bin curl -fsSL https://sensor.oisp.dev/install.sh | sudo sh
```

**What it does:**
1. Detects OS and distribution (Ubuntu, Debian, RHEL, Fedora, Rocky, Alma)
2. Checks kernel version (>= 5.8 recommended, 4.18+ supported)
3. Verifies BTF support (`/sys/kernel/btf/vmlinux`)
4. Checks OpenSSL library availability
5. Downloads and installs appropriate package (.deb or .rpm)
6. Falls back to binary installation if packages unavailable
7. Configures systemd service
8. Sets capabilities for non-root operation

**Advantages:**
- Works on any Linux distribution
- Automatic system compatibility check
- Intelligent fallback strategy
- Safe and idempotent

---

### Method 3: Binary Installation

Portable binary installation without package manager:

```bash
# Download binary
wget https://github.com/oximyHQ/oisp-sensor/releases/latest/download/oisp-sensor-x86_64-unknown-linux-gnu.tar.gz

# Extract
tar -xzf oisp-sensor-x86_64-unknown-linux-gnu.tar.gz

# Install
sudo mv oisp-sensor /usr/local/bin/
sudo chmod +x /usr/local/bin/oisp-sensor

# Set capabilities for non-root operation
sudo setcap cap_sys_admin,cap_bpf,cap_perfmon,cap_net_admin+ep /usr/local/bin/oisp-sensor
```

**Manual systemd service setup:**

```bash
# Create service file
sudo tee /etc/systemd/system/oisp-sensor.service > /dev/null <<EOF
[Unit]
Description=OISP Sensor - AI Activity Monitoring
After=network.target

[Service]
Type=simple
ExecStart=/usr/local/bin/oisp-sensor record --output /var/log/oisp/events.jsonl
Restart=on-failure
RestartSec=10

# Capabilities
AmbientCapabilities=CAP_SYS_ADMIN CAP_BPF CAP_PERFMON CAP_NET_ADMIN
CapabilityBoundingSet=CAP_SYS_ADMIN CAP_BPF CAP_PERFMON CAP_NET_ADMIN

# Security
NoNewPrivileges=no
ProtectSystem=strict
ReadWritePaths=/var/log/oisp
ProtectHome=read-only
PrivateTmp=true

# Resource limits
LimitMEMLOCK=infinity
LimitNOFILE=65536

[Install]
WantedBy=multi-user.target
EOF

# Create log directory
sudo mkdir -p /var/log/oisp
sudo chmod 755 /var/log/oisp

# Enable and start service
sudo systemctl daemon-reload
sudo systemctl enable oisp-sensor
sudo systemctl start oisp-sensor
```

**Advantages:**
- No package dependencies
- Portable across distributions
- Full control over installation location
- Easy to update (replace binary)

---

## Verify Installation

After installation, verify OISP Sensor is working:

### 1. Check Binary Version

```bash
oisp-sensor --version
# Output: oisp-sensor 0.2.0
```

### 2. Run System Check

```bash
oisp-sensor check
```

**Expected output:**

```
OISP Sensor System Check
========================

Platform: linux x86_64 (supported)
Distribution: Ubuntu 24.04

Kernel Version:    6.8.0 [OK]
BTF Support:       /sys/kernel/btf/vmlinux [OK]
eBPF Filesystem:   /sys/fs/bpf [OK]
Permissions:       CAP_BPF+CAP_PERFMON set [OK]
Systemd:           Available [OK]

SSL Libraries:
  /usr/lib/x86_64-linux-gnu/libssl.so.3 [FOUND]

Result: READY
```

### 3. Test SSL Capture

Run a simple test to verify SSL capture works:

```bash
# Start sensor in one terminal
sudo oisp-sensor record --output /tmp/test.jsonl

# In another terminal, make an HTTPS request
curl -s https://api.openai.com/v1/models > /dev/null

# Stop sensor (Ctrl+C) and check events
cat /tmp/test.jsonl | jq -r '.event_type' | sort | uniq -c
```

**Expected events:**
- `network.connect` - Connection to api.openai.com
- `capture.raw` - SSL read events

---

## Pre-Flight Checks

Before installing, verify your system meets the requirements:

### 1. Kernel Version

```bash
uname -r  # Should be >= 5.8 (4.18+ works with limitations)
```

### 2. BTF Support

```bash
ls /sys/kernel/btf/vmlinux  # Should exist
```

**If BTF is missing:**

<Tabs>
  <TabItem label="Ubuntu / Debian">
    ```bash
    # Install kernel headers
    sudo apt-get install linux-headers-$(uname -r)

    # Or upgrade to a BTF-enabled kernel
    sudo apt-get upgrade linux-image-generic
    ```
  </TabItem>

  <TabItem label="RHEL / Rocky / Fedora">
    ```bash
    # Install kernel-devel
    sudo dnf install kernel-devel

    # Ensure BTF is enabled (may require reboot)
    sudo grubby --update-kernel=ALL --args="CONFIG_DEBUG_INFO_BTF=y"
    ```
  </TabItem>
</Tabs>

### 3. BPF Filesystem

```bash
ls /sys/fs/bpf  # Should exist
```

### 4. OpenSSL Library

```bash
ldconfig -p | grep libssl  # Should show libssl.so.3 or libssl.so.1.1
```

**If OpenSSL is missing:**

<Tabs>
  <TabItem label="Ubuntu / Debian">
    ```bash
    sudo apt-get install libssl3
    ```
  </TabItem>

  <TabItem label="RHEL / Rocky / Fedora">
    ```bash
    sudo dnf install openssl-libs
    ```
  </TabItem>
</Tabs>

### 5. Capabilities Support

```bash
which setcap  # Should exist
```

**If setcap is missing:**

<Tabs>
  <TabItem label="Ubuntu / Debian">
    ```bash
    sudo apt-get install libcap2-bin
    ```
  </TabItem>

  <TabItem label="RHEL / Rocky / Fedora">
    ```bash
    sudo dnf install libcap
    ```
  </TabItem>
</Tabs>

---

## Post-Installation

### Enable Systemd Service

```bash
# Enable service to start on boot
sudo systemctl enable oisp-sensor

# Start service now
sudo systemctl start oisp-sensor

# Check status
sudo systemctl status oisp-sensor

# View logs
sudo journalctl -u oisp-sensor -f
```

See [Running as a Service](./service) for detailed service management.

### Create Configuration File

Create `/etc/oisp/config.toml`:

```toml
[sensor]
name = "my-server-01"

[capture]
ssl = true
process = true
file = true
network = true

[redaction]
mode = "safe"  # safe (recommended), full, minimal

[export.jsonl]
enabled = true
path = "/var/log/oisp/events.jsonl"
append = true
rotate = true
max_size_mb = 100
```

See [Configuration Guide](/configuration/config-file/) for all options.

---

## Architecture-Specific Notes

### ARM64 (aarch64)

OISP Sensor fully supports ARM64 (Graviton, Raspberry Pi, etc.):

```bash
# Download ARM64 binary
wget https://github.com/oximyHQ/oisp-sensor/releases/latest/download/oisp-sensor-aarch64-unknown-linux-gnu.tar.gz

# Or use universal installer (auto-detects architecture)
curl -fsSL https://sensor.oisp.dev/install.sh | sudo sh
```

---

## Troubleshooting Installation

### "Permission denied" when running

**Solution:** Run with `sudo` or set capabilities:

```bash
sudo setcap cap_sys_admin,cap_bpf,cap_perfmon,cap_net_admin+ep /usr/bin/oisp-sensor
```

### "BTF not found"

**Solution:** Install kernel headers or upgrade kernel:

```bash
# Ubuntu/Debian
sudo apt-get install linux-headers-$(uname -r)

# RHEL/Fedora
sudo dnf install kernel-devel
```

### "No SSL libraries found"

**Solution:** Install OpenSSL development libraries:

```bash
# Ubuntu/Debian
sudo apt-get install libssl3

# RHEL/Fedora
sudo dnf install openssl-libs
```

See [Troubleshooting Guide](./troubleshooting) for more issues.

---

## Uninstallation

<Tabs>
  <TabItem label="Ubuntu / Debian">
    ```bash
    # Stop service
    sudo systemctl stop oisp-sensor
    sudo systemctl disable oisp-sensor

    # Remove package
    sudo dpkg -r oisp-sensor

    # Or purge (removes config files)
    sudo dpkg --purge oisp-sensor
    ```
  </TabItem>

  <TabItem label="RHEL / Rocky / Fedora">
    ```bash
    # Stop service
    sudo systemctl stop oisp-sensor
    sudo systemctl disable oisp-sensor

    # Remove package
    sudo dnf remove oisp-sensor
    ```
  </TabItem>

  <TabItem label="Binary Installation">
    ```bash
    # Stop service
    sudo systemctl stop oisp-sensor
    sudo systemctl disable oisp-sensor

    # Remove files
    sudo rm /usr/local/bin/oisp-sensor
    sudo rm /etc/systemd/system/oisp-sensor.service
    sudo rm -rf /var/log/oisp
    sudo rm -rf /etc/oisp

    # Reload systemd
    sudo systemctl daemon-reload
    ```
  </TabItem>
</Tabs>

---

## Next Steps

1. **[Quick Start](./quick-start)** - See events in 5 minutes
2. **[Running as a Service](./service)** - Configure systemd service
3. **[Production Deployment](./production)** - Deploy to production
4. **[Troubleshooting](./troubleshooting)** - Solve common issues
